
[{{- range $index, $page := .Site.Pages -}}
  {{ $html_h2 :=  findRE "<h2 (.|\n)*?</h2>" $page.Content) | or "nil"  }}
  {{ if ne $html_h2 "nil"}}
    {{- range $html_h2 -}}
      {      
        "objectID": "{{ md5 . }}",
        "url": "{{ $page.Permalink }}",
        "title": "{{ htmlEscape $page.Title}}",
        "content": {{ .  | plainify | jsonify  }},
        "hierarchy": { 
          "lvl0": "{{ htmlEscape $page.Title}}",
          "lvl1": "{{ . | plainify }}",
          "lvl2": "",
          "lvl3": "",
          "lvl4": "",
          "lvl5": "",
          "lvl6": ""
        }
      },
    {{- end -}}    
  {{ end }}
  {{- if ne $page.Type "json" -}}
    {{- if and $index (gt $index 0) -}},
    {{- end -}}
  {{- end -}}
{{- end -}}]


