
[{{- range $index, $page := .Site.Pages -}}
  {{- if ne $page.Type "json" -}}
      {{- range $index, $html :=  findRE "<ul(.|\n)*?</ul>" $page.Content -}}  
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },   
      {{- end -}}
      {{- range $index, $html :=  findRE "<table(.|\n)*?</table>" $page.Content -}}        
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },  
      {{- end -}}
      {{- range $index, $html :=  findRE "<p(.|\n)*?</p>" $page.Content -}}        
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },  
      {{- end -}}
      {{- range $index, $html :=  findRE "<h2(.|\n)*?</h2>" $page.Content -}}  
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}#{{ $content }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": {{ $content | jsonify }},
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },    
      {{- end -}}
      {{- range $index, $html :=  findRE "<h3(.|\n)*?</h3>" $page.Content -}}        
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}#{{ $content }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },    
      {{- end -}}
      {{- range $index, $html :=  findRE "<h4(.|\n)*?</h4>" $page.Content -}}        
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}#{{ $content }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },    
      {{- end -}}
      {{- range $index, $html :=  findRE "<h5(.|\n)*?</h5>" $page.Content -}}        
        {{ $content := . | plainify }}
        {      
          "objectID": "{{ md5 . }}",
          "url": "{{ $page.Permalink }}#{{ $content }}",
          "title": "{{ htmlEscape $page.Title}}",
          "content": {{ $content | jsonify }},
          "hierarchy": { 
            "lvl0": "{{ htmlEscape $page.Parent.Title }}",
            "lvl1": "{{ htmlEscape $page.Title}}",
            "lvl2": "",
            "lvl3": "",
            "lvl4": "",
            "lvl5": "",
            "lvl6": ""
          }
        },   
    {{- end -}}    
    {{- range $index, $html :=  findRE "<h6(.|\n)*?</h6>" $page.Content -}}        
      {{ $content := . | plainify }}
      {      
        "objectID": "{{ md5 . }}",
        "url": "{{ $page.Permalink }}#{{ $content }}",
        "title": "{{ htmlEscape $page.Title}}",
        "content": {{ $content | jsonify }},
        "hierarchy": { 
          "lvl0": "{{ htmlEscape $page.Parent.Title }}",
          "lvl1": "{{ htmlEscape $page.Title}}",
          "lvl2": "",
          "lvl3": "",
          "lvl4": "",
          "lvl5": "",
          "lvl6": ""
        }
      },   
  {{- end -}} 
  {{- end -}}
{{- end -}}
  {
    "objectID": "{{ md5 "null" }}",
    "url": "",
    "title": "null",
    "content": "null",
    "hierarchy": { 
      "lvl0": "null",
      "lvl1": "",
      "lvl2": "",
      "lvl3": "",
      "lvl4": "",
      "lvl5": "",
      "lvl6": ""
    }
  }
]


