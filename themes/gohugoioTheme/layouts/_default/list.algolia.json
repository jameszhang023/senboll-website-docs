
[{{- range $index, $page := .Site.Pages -}}
  {{ $html_p := findRE "<p (.|\n)*?</p>" $page.Content }},
  {{- range $html_p -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{ $html_h2 := findRE "<h2 (.|\n)*?</h2>" $page.Content }},
  {{- range $html_h2 -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "{{ . | plainify }}",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{ $html_h3 := findRE "<h3 (.|\n)*?</h3>" $page.Content }},
  {{- range $html_h3 -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "{{ . | plainify }}",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{ $html_h4 := findRE "<h4 (.|\n)*?</h4>" $page.Content }},
  {{- range $html_h4 -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "{{ . | plainify }}",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{ $html_h5 := findRE "<h5 (.|\n)*?</h5>" $page.Content }},
  {{- range $html_h5 -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "{{ . | plainify }}",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{ $html_h6 := findRE "<h6 (.|\n)*?</h6>" $page.Content }},
  {{- range $html_h6 -}}
    {      
      "objectID": "{{ md5 . }}",
      "url": "{{ $page.Permalink }}",
      "title": "{{ htmlEscape $page.Title}}",
      "content": {{ .  | plainify | jsonify  }},
      "hierarchy": { 
        "lvl0": "{{ htmlEscape $page.Title}}",
        "lvl1": "{{ . | plainify }}",
        "lvl2": "",
        "lvl3": "",
        "lvl4": "",
        "lvl5": "",
        "lvl6": ""
      }
    },
  {{- end -}}

  {{- if ne $page.Type "json" -}}
    {{- if and $index (gt $index 0) -}},
    {{- end -}}
  {{- end -}}
{{- end -}}]


